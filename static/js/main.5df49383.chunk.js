(this.webpackJsonpschool_tracker=this.webpackJsonpschool_tracker||[]).push([[0],{125:function(e,t,a){},152:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),s=a.n(l),o=(a(125),a(63)),i=a(64),c=a(56),d=a(85),h=a(78),u=a(44),j=a.n(u),g=a(90),p=a.n(g),b=a(107),x=a(171),m=a(45),y=a(172),O=a(174),f=a(167),v=a(168),w=a(155),k=a(170),C=a(169),S=a(176),D=a(2),M=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={user:e.props,Loading:!1,status:"safe",gdpLevel:0,statusBar:null,location:null,currentReports:[],currentWeatherReports:[],modal:!1,modal2:!1,selectedDay:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getWeather()}},{key:"getWeather",value:function(){var e=this,t=this.props.user.location,a="https://api.openweathermap.org/data/2.5/weather?q="+(t+=", CA")+"&units=metric&appid=86583fb8344f78f0fdf02aa0d9e1859c";j.a.get(a).then((function(a){e.setState({Loading:!1,user:e.props.user,location:t,weather:a.data}),e.getData(e.props.user.id)}))}},{key:"getData",value:function(){var e=Object(b.a)(p.a.mark((function e(t){var a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.a.get("https://maxwelljonesdesign.com/weather/"+t).then((function(e){e.data&&(a.setState({currentReports:e.data}),a.calculateWeather(e.data))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"calculateWeather",value:function(e){console.log(e);var t=0;e.forEach((function(e){var a=t;a+=Math.floor((e.high+e.low)/2),console.log("current gdp",a),e.fertilized?(e.gdp=Math.floor((e.high+e.low)/2),e.status="rgb(205,205,205)",e.message="Safe",e.color="black"):a>=170?(e.gdp=a,e.status="red",e.message="Action",e.color="white"):a>=120?(e.gdp=a,e.status="rgb(209, 14, 0,0.5)",e.message="Warning",e.color="white"):a>=80?(e.gdp=a,e.status="yellow",e.message="Moderate",e.color="black"):(e.gdp=a,e.status="rgb(123, 237, 47)",e.message="Safe",e.color="black"),t=e.gdp})),this.setState({currentWeatherReports:e})}},{key:"formatDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}},{key:"getToday",value:function(){var e=new Date,t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()],a=e.getDate()<10?"0"+e.getDate():e.getDate(),n=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],r=e.getFullYear();return(e.getHours()>12?e.getHours()-12:e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+(e.getHours()>12?" pm":" am")+" "+t+" "+a+" "+n+", "+r}},{key:"getDate",value:function(e){var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][(e=new Date(e)).getUTCDay()];return e.getUTCMonth()+1+"/"+(e.getUTCDate()<9?"0"+e.getUTCDate():e.getUTCDate())+" "+t}},{key:"status",value:function(e){var t=e[e.length-1];return Object(D.jsx)("div",{style:{backgroundColor:t.status,padding:"5px"},children:Object(D.jsx)("h2",{style:{textAlign:"center",color:"black"},children:t.message})})}},{key:"ferterlize",value:function(e){var t=this,a=e[e.length-1].id;j.a.get("https://maxwelljonesdesign.com/weather/fertilize/"+a).then((function(e){e.data&&t.getData(t.props.user.id)})),this.closeModal()}},{key:"tableBoard",value:function(e){var t=this;return(e=e.slice(Math.max(e.length-7,0))).map((function(e){return Object(D.jsxs)(x.a.Row,{color:"blue",children:[Object(D.jsx)(x.a.Cell,{id:"tbody",children:t.getDate(e.date)}),Object(D.jsx)(x.a.Cell,{id:"tbody",children:e.high}),Object(D.jsx)(x.a.Cell,{id:"tbody",children:e.low}),Object(D.jsxs)(x.a.Cell,{id:"tbody",style:{backgroundColor:e.status,color:e.color},children:[e.gdp,Object(D.jsx)(m.a,{style:{display:e.fertilized?null:"none"},color:"black",name:"leaf"})]})]},e.date)}))}},{key:"openModal",value:function(){this.setState({modal:!0})}},{key:"closeModal",value:function(){this.setState({modal:!1})}},{key:"openModal2",value:function(){this.setState({modal2:!0})}},{key:"closeModal2",value:function(){this.setState({modal2:!1})}},{key:"logout",value:function(){console.log("logging out"),localStorage.setItem("user",null),this.setState({user:null}),window.location.reload(!0)}},{key:"updateWeatherItem",value:function(e){var t=this,a=document.getElementById("idForm").value,n=document.getElementById("highForm").value,r=document.getElementById("lowForm").value,l=document.getElementById("fertForm").checked,s=this.state.currentWeatherReports;console.log(a),null!==a&&(""===n&&s.forEach((function(e){e.id===parseInt(a)&&(n=e.high)})),""===r&&s.forEach((function(e){e.id===parseInt(a)&&(console.log("should be",e.low),r=e.low)}))),e={id:a,high:n,low:r,fertilized:l},j.a.post("https://maxwelljonesdesign.com/weather/update",e).then((function(e){e.data&&(t.getData(t.props.user.id),t.closeModal2())}))}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"blur",style:{padding:"5vw"},children:[Object(D.jsxs)(y.a,{style:{width:"100%",margin:"auto",padding:"10px",maxWidth:"600px"},children:[Object(D.jsx)(O.a,{active:this.state.Loading,inverted:!0,children:Object(D.jsx)(f.a,{size:"medium",children:"Loading"})}),Object(D.jsxs)(y.a.Header,{children:[Object(D.jsx)("h1",{style:{fontSize:"15px",textAlign:"center"},children:this.getToday()}),this.state.weather&&Object(D.jsxs)("h2",{style:{fontSize:"15px",textAlign:"center"},children:[this.state.weather.main.temp,"\xb0 in ",this.state.location]})]}),Object(D.jsx)(v.a,{style:{marginBottom:"5px"}}),this.state.currentWeatherReports.length>0&&this.status(this.state.currentWeatherReports),Object(D.jsx)(v.a,{style:{marginTop:"5px"}}),Object(D.jsxs)("div",{style:{width:"100%"},children:[Object(D.jsx)("div",{style:{maxHeight:"500px",overflow:"auto"},children:Object(D.jsxs)(x.a,{unstackable:!0,children:[Object(D.jsx)(x.a.Header,{color:"blue",children:Object(D.jsxs)(x.a.Row,{children:[Object(D.jsx)(x.a.HeaderCell,{id:"thc",children:"Date"}),Object(D.jsx)(x.a.HeaderCell,{id:"thc",children:"High"}),Object(D.jsx)(x.a.HeaderCell,{id:"thc",children:"Low"}),Object(D.jsx)(x.a.HeaderCell,{id:"thc",children:"GDD"})]})}),Object(D.jsx)(x.a.Body,{id:"tbody",children:this.state.currentWeatherReports&&this.tableBoard(this.state.currentWeatherReports)})]})}),Object(D.jsxs)(w.a.Group,{style:{width:"100%",padding:"10px",paddingBottom:"0px",marginTop:"2px"},children:[Object(D.jsx)(w.a,{onClick:function(){return e.openModal2()},style:{width:"50%"},color:"blue",children:"Fix"}),Object(D.jsx)(w.a,{onClick:function(){return e.openModal()},style:{color:"black",width:"50%"},color:"green",children:"Fertilze"})]})]})]}),Object(D.jsx)("div",{style:{textAlign:"center",margin:"auto"},children:Object(D.jsx)(k.a,{style:{padding:"10px",left:"auto",textAlign:"center",height:"120px",width:"220px",top:"20%"},open:this.state.modal,children:Object(D.jsxs)("div",{style:{padding:"20px"},children:["Are you sure?",Object(D.jsxs)(w.a.Group,{style:{width:"100%",paddingTop:"20px"},children:[Object(D.jsx)(w.a,{onClick:function(){return e.ferterlize(e.state.currentWeatherReports)},color:"green",children:"Yes"}),Object(D.jsx)(w.a,{onClick:function(){return e.closeModal()},color:"red",children:"No"})]})]})})}),Object(D.jsxs)("div",{style:{margin:"5px",textAlign:"center"},children:[Object(D.jsx)(w.a,{onClick:function(){return e.logout()},style:{margin:"auto",textAlign:"center"},children:"Logout"}),Object(D.jsx)("p",{style:{textAlign:"center",color:"white",padding:"5px"},children:Object(D.jsx)("a",{style:{color:"white",opacity:"50%"},href:"mailto:maxjones2001@hotmail.com?subject=Help",children:"Need help?"})})]}),Object(D.jsx)(k.a,{style:{top:"2%",left:"auto",margin:"auto",width:"90%",height:"500px"},open:this.state.modal2,children:Object(D.jsxs)("div",{style:{padding:"20px"},children:[Object(D.jsx)("div",{style:{overflowY:"auto"},children:Object(D.jsxs)(x.a,{unstackable:!0,children:[Object(D.jsx)(x.a.Header,{color:"blue",children:Object(D.jsxs)(x.a.Row,{children:[Object(D.jsx)(x.a.HeaderCell,{id:"thc",children:"id"}),Object(D.jsx)(x.a.HeaderCell,{id:"thc",children:"Date"}),Object(D.jsx)(x.a.HeaderCell,{id:"thc",children:"High"}),Object(D.jsx)(x.a.HeaderCell,{id:"thc",children:"Low"})]})}),Object(D.jsx)(x.a.Body,{id:"tbody",children:this.state.currentWeatherReports.slice(Math.max(this.state.currentWeatherReports.length-7,0)).map((function(t){return Object(D.jsxs)(x.a.Row,{color:"blue",children:[Object(D.jsx)(x.a.Cell,{id:"tbody",children:t.id}),Object(D.jsx)(x.a.Cell,{id:"tbody",children:e.getDate(t.date)}),Object(D.jsx)(x.a.Cell,{id:"tbody",children:t.high}),Object(D.jsx)(x.a.Cell,{id:"tbody",children:t.low})]},t.date)}))})]})}),Object(D.jsxs)("div",{style:{paddingTop:"10px",paddingBottom:"10px"},children:[Object(D.jsx)(C.a,{id:"idForm",placeholder:"ID",style:{display:"inline-block",width:"33%"}}),Object(D.jsx)(C.a,{id:"highForm",placeholder:"High",style:{display:"inline-block",width:"33%"}}),Object(D.jsx)(C.a,{id:"lowForm",placeholder:"Low",style:{display:"inline-block",width:"33%"}})]}),Object(D.jsx)("div",{style:{},children:Object(D.jsx)(S.a,{id:"fertForm",style:{width:"100%",paddingTop:"5px",paddingBottom:"5px"},label:"Fertilzed"})}),Object(D.jsxs)("div",{style:{width:"100%",margin:"auto",textAlign:"center"},children:[Object(D.jsx)(w.a,{onClick:function(){return e.updateWeatherItem()},children:"Update"}),Object(D.jsx)(w.a,{onClick:function(){return e.closeModal2()},children:"Cancel"})]})]})})]})}}]),a}(r.a.Component),H=(a(152),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={users:null,username:null,password:null,status:" ",user:null},n.handleUsername=n.handleUsername.bind(Object(c.a)(n)),n.handlePassword=n.handlePassword.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"loginUser",value:function(){var e=this,t={username:this.state.username,password:this.state.password};j.a.post("https://maxwelljonesdesign.com/users/login",t).then((function(t){t.data?(console.log("sucess"),localStorage.setItem("user",JSON.stringify(t.data)),e.setState({status:"Success",user:t.data})):(console.log("no user found"),e.setState({status:"Not Succesful"}))}))}},{key:"componentDidMount",value:function(){if(localStorage.getItem("user")){var e=JSON.parse(localStorage.getItem("user"));this.setState({user:e})}}},{key:"loginComponent",value:function(){var e=this;return Object(D.jsx)("div",{id:"contain",children:Object(D.jsx)("div",{children:Object(D.jsxs)(y.a,{id:"card",children:[Object(D.jsx)("div",{style:{margin:"10px",padding:"1.5vh",textAlign:"center",color:"white",backgroundColor:"rgba(46, 61, 115)"},children:Object(D.jsx)("h1",{style:{},children:"L O G I N"})}),Object(D.jsxs)("div",{style:{textAlign:"center",margin:"10px",padding:"1.5vh",backgroundColor:"rgba(46, 61, 115)"},children:[Object(D.jsx)(C.a,{onChange:this.handleUsername,style:{width:"90%",margin:"1vh"},iconPosition:"left",icon:"male",placeholder:"USERNAME"}),Object(D.jsx)(C.a,{type:"password",onKeyPress:function(t){"Enter"===t.key&&e.loginUser()},onChange:this.handlePassword,style:{width:"90%",margin:"1vh"},iconPosition:"left",icon:"lock",placeholder:"PASSWORD"}),Object(D.jsx)(w.a,{onClick:function(){return e.loginUser()},style:{margin:"1vh",color:"white"},color:"orange",size:"mini",children:"LOGIN"}),Object(D.jsx)("p",{style:{color:"white"},children:Object(D.jsx)("a",{target:"_blank",rel:"noreferrer",style:{textDecoration:"none",color:"white"},href:"mailto:maxjones2001@hotmail.com",children:"Need help?"})})]})]})})})}},{key:"render",value:function(){return Object(D.jsxs)("div",{children:[!this.state.user&&this.loginComponent(),this.state.user&&Object(D.jsx)(M,{user:this.state.user})]})}}]),a}(r.a.Component));a(153);s.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(H,{})}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.5df49383.chunk.js.map